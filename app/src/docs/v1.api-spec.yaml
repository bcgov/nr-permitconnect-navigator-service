---
openapi: 3.0.2
info:
  version: 1.0.0
  title: NR PermitConnect Navigator Service (PCNS)
  description: >-
    A case management application meant to serve the needs of the NRM Permitting
    Solutions Branch.
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: /api/v1
    description: This server
security:
  - BearerAuth: []
    OpenID: []
tags:
  - name: Contact
    description: Operations for managing Contacts
  - name: Document
    description: Operations for managing Documents
  - name: Enquiry
    description: Operations for managing Enquiries
  - name: Note
    description: Operations for managing Notes
  - name: Permit
    description: Operations for managing Permits
  - name: Permit Note
    description: Operations for Permit Notes
  - name: Reporting
    description: Operations for performings actions related to reporting
  - name: Roadmap
    description: Operations for validating Roadmaps
  - name: Submission
    description: Operations for managing Submissions, Drafts, and Statistics
  - name: User
    description: Operations for managing users
paths:
  /contact:
    get:
      summary: Get current user contact
      description: >-
        Gets contact information based on the request's current user context.
      operationId: getCurrentUserContact
      tags:
        - Contact
      responses:
        '201':
          description: Document created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Document'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /contact/{contactId}:
    get:
      summary: Get a specific contact
      operationId: getContact
      tags:
        - Contact
      parameters:
        - $ref: '#/components/parameters/Path-ContactId'
        - in: query
          name: includeActivities
          required: false
          schema:
            type: boolean
            description: Whether to include connected Activity IDs
      responses:
        '200':
          description: Details of the specific contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Contact'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Update an contact
      operationId: updateContact
      tags:
        - Contact
      parameters:
        - $ref: '#/components/parameters/Path-ContactId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DB-Contact'
      responses:
        '200':
          description: Contact updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Contact'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /contact/search:
    get:
      summary: Search contacts
      description: Returns a list of contacts based on the given queries
      operationId: searchContacts
      tags:
        - Contact
      parameters:
        - in: query
          name: contactApplicantRelationship
          required: false
          schema:
            type: string
            description: The contact applicant relationship type to filter on
            example: Property owner
        - in: query
          name: contactPreference
          required: false
          schema:
            type: string
            description: The Contact's contact preference
            example: Email
        - in: query
          name: contactId
          required: false
          schema:
            type: array
            description: The Contact IDs to filter on
            items:
              $ref: '#/components/parameters/Path-ContactId'
        - in: query
          name: email
          required: false
          schema:
            type: string
            description: The Contact's email to filter on
            example: JaneDoe@email.com
        - in: query
          name: firstName
          required: false
          schema:
            type: string
            description: The Contact's firstName to filter on
            example: Jane
        - in: query
          name: lastName
          required: false
          schema:
            type: string
            description: The Contact's lastName to filter on
            example: Doe
        - in: query
          name: phoneNumber
          required: false
          schema:
            type: string
            description: The Contact's phoneNumber to filter on
            example: (123) 456-7890
        - in: query
          name: userId
          required: false
          schema:
            type: array
            description: The Contact User IDs to filter on
            items:
              $ref: '#/components/parameters/Query-UserId'
      responses:
        '200':
          description: A list of contacts matching the search criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-Contact'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /document:
    put:
      summary: Create a document
      description: >-
        Creates a link between an activity and a previously existing object in
        COMS.
      operationId: createDocument
      tags:
        - Document
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-Document'
      responses:
        '201':
          description: Document created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Document'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /document/{documentId}:
    delete:
      summary: Delete a document by ID
      description: Deletes the document associated with the provided document ID.
      operationId: deleteDocument
      tags:
        - Document
      parameters:
        - $ref: '#/components/parameters/Path-DocumentId'
      responses:
        '200':
          description: Document deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Document'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /document/list/{activityId}:
    get:
      summary: List documents by Activity ID
      description: Retrieves a list of documents associated with a given activity.
      operationId: listDocuments
      tags:
        - Document
      parameters:
        - $ref: '#/components/parameters/Path-ActivityId'
      responses:
        '200':
          description: A list of documents for the specified activity
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-Document'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /enquiry:
    get:
      summary: Gets a list of enquiries
      description: >-
        Gets a list of enquiries, if the current authorization includes scope:self
        the list returned will contain just the enquiries made by the user.
      operationId: getEnquiries
      tags:
        - Enquiry
      responses:
        '200':
          description: A list of enquiries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Create an enquiry
      description: Creates an enquiry and set status to Submitted
      operationId: putEnquiry
      tags:
        - Enquiry
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-CreateEnquiry'
      responses:
        '201':
          description: Enquiry created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-CreateEnquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /enquiry/{enquiryId}:
    get:
      summary: Get a specific enquiry
      operationId: getEnquiry
      tags:
        - Enquiry
      parameters:
        - $ref: '#/components/parameters/Path-EnquiryId'
      responses:
        '200':
          description: Details of the specific enquiry
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Update an enquiry
      operationId: updateEnquiry
      tags:
        - Enquiry
      parameters:
        - $ref: '#/components/parameters/Path-EnquiryId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DB-Enquiry'
      responses:
        '200':
          description: Enquiry updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    delete:
      summary: Delete an enquiry
      description: >-
        Deletes the enquiry, followed by the associated activity. This action
        will cascade delete across all linked items
      operationId: deleteEnquiry
      tags:
        - Enquiry
      parameters:
        - $ref: '#/components/parameters/Path-EnquiryId'
      responses:
        '200':
          description: Enquiry deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Error'
  /enquiry/{enquiryId}/delete:
    patch:
      summary: Soft delete
      description: A soft delete of an enquiry using a is_deleted flag
      operationId: enquiry-updateIsDeletedFlag
      tags:
        - Enquiry
      parameters:
        - $ref: '#/components/parameters/Path-EnquiryId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isDeleted:
                  type: boolean
                  example: true
      responses:
        '200':
          description: The is_deleted flag updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    required:
                      - is_deleted
                    properties:
                      is_deleted:
                        type: boolean
                        example: true
                  - $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /enquiry/search:
    get:
      summary: Search enquiries
      description: Returns a list of enquiries based on the given queries
      operationId: searchEnquiries
      tags:
        - Enquiry
      parameters:
        - $ref: '#/components/parameters/Query-IncludeDeleted'
        - $ref: '#/components/parameters/Query-IncludeUser'
        - in: query
          name: activityId
          required: false
          schema:
            type: array
            description: The Activity IDs to filter on
            items:
              $ref: '#/components/parameters/Path-ActivityId'
        - in: query
          name: createdBy
          required: false
          schema:
            type: array
            description: The User IDs to filter on
            items:
              $ref: '#/components/parameters/Query-CreatedBy'
        - in: query
          name: enquiryId
          required: false
          schema:
            type: array
            description: The Enquiry IDs to filter on
            items:
              $ref: '#/components/parameters/Path-EnquiryId'
        - in: query
          name: intakeStatus
          required: false
          schema:
            type: array
            description: The intake statuses to filter on
            items:
              $ref: '#/components/parameters/IntakeStatus'
      responses:
        '200':
          description: A list of enquiries matching the search criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-Enquiry'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /note:
    put:
      summary: Create a note
      operationId: createNote
      tags:
        - Note
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-Notes'
      responses:
        '201':
          description: Note created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Note'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /note/{noteId}:
    put:
      summary: Update a note
      operationId: updateNote
      tags:
        - Note
      parameters:
        - $ref: '#/components/parameters/Path-NoteId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DB-Note'
      responses:
        '200':
          description: Note updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Note'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    delete:
      summary: Delete a note
      description: Soft deletes a note by marking isDeleted true
      operationId: deleteNote
      tags:
        - Note
      parameters:
        - $ref: '#/components/parameters/Path-NoteId'
      responses:
        '200':
          description: Note deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Note'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Error'
  /note/bringForward:
    get:
      summary: List notes with bring forward type
      description: Retrieve a list of notes with the Bring forward type given
      operationId: listBringForward
      tags:
        - Note
      parameters:
        - $ref: '#/components/parameters/Query-BringForwardState'
      responses:
        '200':
          description: A list of bring forward notes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Response-BringForwardNotes'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
  /note/list/{activityId}:
    get:
      summary: List notes by Activity ID
      description: Return a list of notes that have the given Activity ID
      operationId: listNotes
      tags:
        - Note
      parameters:
        - $ref: '#/components/parameters/Path-ActivityId'
      responses:
        '200':
          description: A list of notes for the specified activity
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-Note'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /permit:
    get:
      summary: List permits by Activity ID
      description: Gets a list of permits that are associated to a specific activity
      operationId: listPermits
      tags:
        - Permit
      parameters:
        - $ref: '#/components/parameters/Query-ActivityId'
        - in: query
          name: includeNotes
          description: Whether to include associated permit notes in the response.
          required: false
          schema:
            type: boolean
            example: true
      responses:
        '200':
          description: A list of permits for the specified activity
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/DB-Permit'
                    - type: object
                      properties:
                        permitNotes:
                          type: array
                          description: List of notes associated with the permit (if `includeNotes` is true)
                          items:
                            $ref: '#/components/schemas/DB-PermitNote'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Create a permit
      operationId: createPermit
      tags:
        - Permit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-Permit'
      responses:
        '201':
          description: Permit created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Permit'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /permit/{permitId}:
    get:
      summary: Get a permit
      operationId: getPermit
      tags:
        - Permit
      parameters:
        - in: path
          name: permitId
          required: true
          schema:
            type: string
            description: The ID of the permit to update
      responses:
        '200':
          description: Permit updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Permit'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Update a permit
      operationId: updatePermit
      tags:
        - Permit
      parameters:
        - in: path
          name: permitId
          required: true
          schema:
            type: string
            description: The ID of the permit to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-Permit'
      responses:
        '200':
          description: Permit updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Permit'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    delete:
      summary: Delete a permit
      operationId: deletePermit
      tags:
        - Permit
      parameters:
        - $ref: '#/components/parameters/Path-PermitId'
      responses:
        '200':
          description: Permit deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-Permit'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /permit/types:
    get:
      summary: Get all permit types
      operationId: getPermitTypes
      tags:
        - Permit
      responses:
        '200':
          description: A list of all permit types
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-PermitType'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
  /permit/note:
    put:
      summary: Create a permit note
      description: Creates a new permit note for a specified permit.
      operationId: createPermitNote
      tags:
        - Permit Note
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-PermitNote'
      responses:
        '201':
          description: Permit note created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-PermitNote'
        '401':
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        default:
          $ref: '#/components/responses/Error'
  /reporting/housingProject/permit:
    get:
      summary: Query and retrieve all housing project data related to permits
      operationId: getHousingProjectPermitData
      tags:
        - Reporting
      responses:
        '200':
          description: A list of housing projects joined with permits and permit type
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Response-SubmissionPermitData'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
  /roadmap:
    put:
      summary: Send an email with the roadmap data
      operationId: send
      tags:
        - Roadmap
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-Roadmap'
      responses:
        '201':
          description: Permit created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-Email'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject:
    get:
      summary: Get a list of housing projects
      operationId: getHousingProjects
      tags:
        - Housing Project
      responses:
        '200':
          description: A list of housing projects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Create a housing project
      operationId: createHousingProject
      tags:
        - Housing Project
      responses:
        '201':
          description: Housing Project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-SubmissionCreate'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject/{housingProjectId}:
    get:
      summary: Get a specific housing project
      operationId: getHousingProject
      tags:
        - Housing Project
      parameters:
        - $ref: '#/components/parameters/Path-SubmissionId'
      responses:
        '200':
          description: Details of the specific housing project
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    put:
      summary: Update a housing project
      operationId: updateHousingProject
      tags:
        - Housing Project
      parameters:
        - $ref: '#/components/parameters/Path-SubmissionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-SubmissionUpdate'
      responses:
        '200':
          description: Housing Project updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
    delete:
      summary: Delete a housing project
      operationId: deleteHousingProject
      tags:
        - Housing Project
      parameters:
        - $ref: '#/components/parameters/Path-SubmissionId'
      responses:
        '200':
          description: Housing Project deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject/{housingProjectId}/delete:
    patch:
      summary: Soft delete
      description: A soft delete of a housing project using a is_deleted flag
      operationId: housingProject-updateIsDeletedFlag
      tags:
        - Submission
      parameters:
        - $ref: '#/components/parameters/Path-SubmissionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - isDeleted
              properties:
                isDeleted:
                  type: boolean
                  description: Set to true to change is deleted tag
                  example: true
      responses:
        '200':
          description: The is_deleted flag updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject/draft:
    put:
      summary: Create or update a draft housing project
      description: >-
        Creates or updates an intake and set status to Draft
        so unfinished/unvalidatd housing projects can be saved
      operationId: housingProject-createDraft
      tags:
        - Housing Project
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-SaveSubmissionDraft'
      responses:
        '201':
          description: Draft housing project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-DraftSubmission'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Error'
  /housingProject/draft/submit:
    put:
      summary: Submit a draft housing project
      description: Creates or updates an intake and set status to Submitted
      operationId: housingProject-updateDraft
      tags:
        - Submission
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Request-SaveSubmissionDraft'
      responses:
        '200':
          description: Draft housing project updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Error'
  /housingProject/email:
    put:
      summary: Send confirmation Email
      operationId: emailConfirmation
      tags:
        - Submission
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailData'
      responses:
        '201':
          description: Email Confirmation was set
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-Email'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject/search:
    get:
      summary: Search housing projects
      description: Returns a list of housing projects based on the given queries
      operationId: searchSubmissions
      tags:
        - Submission
      parameters:
        - $ref: '#/components/parameters/Query-IncludeDeleted'
        - $ref: '#/components/parameters/Query-IncludeUser'
        - in: query
          name: activityId
          required: false
          schema:
            type: array
            description: The Activity IDs to filter on
            items:
              $ref: '#/components/parameters/Path-ActivityId'
        - in: query
          name: createdBy
          required: false
          schema:
            type: array
            description: The User IDs to filter on
            items:
              $ref: '#/components/parameters/Query-CreatedBy'
        - in: query
          name: housingProjectId
          required: false
          schema:
            type: array
            description: The Submission IDs to filter on
            items:
              $ref: '#/components/parameters/Path-SubmissionId'
        - in: query
          name: intakeStatus
          required: false
          schema:
            type: array
            description: The intake statuses to filter on
            items:
              $ref: '#/components/parameters/IntakeStatus'
        - in: query
          name: submissionType
          required: false
          schema:
            type: array
            description: The housing project types to filter on
            items:
              $ref: '#/components/parameters/Query-SubmissionType'
      responses:
        '200':
          description: A list of housing projects matching the search criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DB-HousingProject'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /housingProject/statistics:
    get:
      summary: Get housing project and enquiry statistics
      description: Gets a set of housing project and enquiry related statistics
      operationId: getStatistics
      tags:
        - Submission
      parameters:
        - in: query
          name: dateFrom
          required: false
          schema:
            type: string
            format: date
            description: Start date for the statistics
        - in: query
          name: dateTo
          required: false
          schema:
            type: string
            format: date
            description: End date for the statistics
        - in: query
          name: monthYear
          required: false
          schema:
            type: string
            description: Month and year for the statistics
        - in: query
          name: userId
          required: false
          schema:
            type: string
            description: User ID to filter statistics
      responses:
        '200':
          description: Submission statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-SubmissionStatistics'
        "401":
          $ref: "#/components/responses/Unauthorized"
        '403':
          $ref: '#/components/responses/Forbidden'
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        default:
          $ref: '#/components/responses/Error'
  /user:
    get:
      summary: Search users
      description: Gets a list of users based on given parameters
      operationId: searchUsers
      tags:
        - User
      responses:
        '200':
          description: Users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response-SearchUsers'
        "401":
          $ref: "#/components/responses/Unauthorized"
components:
  parameters:
    IntakeStatus:
      in: path
      name: intakeStatus
      description: The intake status type of a submission
      required: true
      schema:
        type: string
        example: Assigned
    Path-ActivityId:
      in: path
      name: activityId
      description: ID of an Activity
      required: true
      schema:
        type: string
        example: 2DE67F13
    Path-ContactId:
      in: path
      name: contactId
      description: UUID of a Contact
      required: true
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db6f701
    Path-DocumentId:
      in: path
      name: documentId
      description: UUID of a Document
      required: true
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db6f701
    Path-EnquiryId:
      in: path
      name: enquiryId
      description: UUID of an Enquiry
      required: true
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db60921
    Path-NoteId:
      in: path
      name: noteId
      description: UUID of a Note
      required: true
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db6f555
    Path-PermitId:
      in: path
      name: permitId
      description: UUID of a Permit
      required: true
      schema:
        type: string
        format: uuid
        example: da5c5031-0e84-4234-8559-1ba846997482
    Path-SubmissionId:
      in: path
      name: housingProjectId
      description: UUID of a Submission
      required: true
      schema:
        type: string
        format: uuid
        example: da5c5031-0e84-4234-7766-1ba846997482
    Query-ActivityId:
      in: query
      name: activityId
      description: ID of an Activity
      required: true
      schema:
        type: string
        example: 2DE67F13
    Query-BringForwardState:
      in: query
      name: bringForwardState
      description: The state to filter on for bring forward notes
      required: true
      schema:
        type: string
        example: true
    Query-CreatedBy:
      in: query
      name: createdBy
      description: UUID of user who created data
      required: false
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db6f701
    Query-IncludeUser:
      in: query
      name: includeUser
      description: >-
        Whether to include User data with each entity being returned by the results.
      required: false
      schema:
        type: boolean
        example: true
    Query-IncludeDeleted:
      in: query
      name: includeDeleted
      description: >-
        Whether to include records where the related activity is flagged as deleted.
        When true, both deleted and non-deleted entities are returned.
        When false (default), only non-deleted entities are returned.
      required: false
      schema:
        type: boolean
        example: false
    Query-SubmissionType:
      in: query
      name: submissionType
      description: The type of submission
      required: false
      schema:
        type: string
        example: Guidance
        enum: [Guidance, Inapplicable]
    Query-UserId:
      in: query
      name: userId
      description: ID of an User
      required: false
      schema:
        type: string
        format: uuid
        example: b76469a3-896c-4435-aa83-b8b87db6f701
  schemas:
    DB-Contact:
      title: DB Contact
      type: object
      required:
        - contactId
      properties:
        contactId:
          type: string
          format: uuid
          description: The ID of the contact
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        userId:
          type: string
          format: uuid
          description: The ID of the user associated with the contact
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        firstName:
          type: string
          description: First name of the contact person
          example: John
        lastName:
          type: string
          description: Last name of the contact person
          example: Smith
        phoneNumber:
          type: string
          description: Phone number for contact
          example: (123) 456-7890
        email:
          type: string
          format: email
          description: Email address for contact
          example: john.smith@example.com
        contactApplicantRelationship:
          type: string
          enum: [Property owner, Project consultant, Other]
          description: Relationship of the contact person to the project
          example: Agent
        contactPreference:
          type: string
          enum: [Phone call, Email, Either]
          description: Preferred method of contact
          example: Email
    DB-Document:
      title: DB Document
      type: object
      required:
        - activityId
        - documentId
        - filename
        - mimeType
        - length
      properties:
        activityId:
          type: string
          description: The ID of the activity associated with the document
          example: 2DE67F13
        documentId:
          type: string
          description: The unique identifier of the document
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        filename:
          type: string
          description: The original filename of the document
          example: example.jpeg
        mimeType:
          type: string
          description: The MIME type of the document
          example: image/jpeg
        length:
          type: number
          description: The size of the document in bytes
          example: 7414
        createdByFullName:
          type: string
          description: The full name of the user who created the document
          example: Smith, John
    DB-Enquiry:
      title: DB Enquiry
      type: object
      required:
        - enquiryId
        - submittedBy
      properties:
        enquiryId:
          type: string
          description: UUID for an enquiry
          format: uuid
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        activityId:
          type: string
          description: ID for the activity
          example: 2DE67F13
        enquiryType:
          type: string
          description: The type of enquiry
          example: General enquiry
        assignedUserId:
          type: string
          description: User assigned to enquiry
          example: Smith, John
        submittedAt:
          type: string
          format: date-time
          description: Date time enquiry was submitted
          example: '2024-08-27T02:11:45.986Z'
        submittedBy:
          type: string
          description: User who submitted enquiry
          example: JSMITH
        relatedActivityId:
          type: string
          description: Activity ID of related project
          example: 699BFA81
        enquiryDescription:
          type: string
          description: User description for enquiry
          example: This is a description for some enquiry
        createdAt:
          type: string
          format: date-time
          description: Date time for when note is to be brought forward
          example: '2024-08-14T07:00:00.000Z'
        createdBy:
          type: string
          description: UUID for user that created note
          format: uuid
          example: 68a9a188-4d67-46e3-92a4-b5717435cda8
        user:
          $ref: '#/components/schemas/DB-User'
    DB-Note:
      title: DB Note
      type: object
      required:
        - noteId
        - activityId
        - isDeleted
        - note
        - noteType
        - title
        - createdBy
        - createdAt
        - updatedBy
        - updatedAt
      properties:
        noteId:
          type: string
          description: UUID of a note
          format: uuid
          example: 17e5c858-66c1-49ba-bb2e-2b286525f532
        note:
          type: string
          description: The note text
          example: this is a note about something in the project
        activityId:
          type: string
          description: The ID of the activity the note is associated with
          example: 2DE67F13
        noteType:
          type: string
          description: Type of note
          example: Bring forward
        title:
          type: string
          description: Title of the note
          example: Some Title
        bringForwardDate:
          type: string
          format: date-time
          description: Date time for when note is to be brought forward
          example: '2029-08-14T07:00:00.000Z'
        bringForwardState:
          type: string
          description: State of a bring forward tyoe note
          example: Unresolved
        isDeleted:
          type: boolean
          description: Deletion flag
          example: false
        createdAt:
          type: string
          format: date-time
          description: Date time for when note is to be brought forward
          example: '2024-08-14T07:00:00.000Z'
        createdBy:
          type: string
          description: UUID for user that created note
          format: uuid
          example: 68a9a188-4d67-46e3-92a4-b5717435cda8
        updatedAt:
          type: string
          format: date-time
          description: Date time for when note was updated
          example: '2024-08-14T07:00:00.000Z'
        updatedBy:
          type: string
          description: UUID for user that updated note
          format: uuid
          example: 68a9a188-4d67-46e3-92a4-b5717435cda8
    DB-Permit:
      title: DB Permit
      type: object
      required:
        - permitId
        - activityId
        - permitTypeId
        - status
        - needed
        - updatedAt
        - updatedBy
      properties:
        permitId:
          type: string
          description: UUID for permit
          format: uuid
          example: 68a9a188-4d67-46e3-92a4-b57174354231
        activityId:
          type: string
          description: The ID of the activity associated with the permit
          example: 2DE67F13
        permitTypeId:
          type: number
          description: ID for the associated permit type
          example: 1
        issuedPermitId:
          type: string
          description: ID of the issued permit
          example: '123'
        trackingId:
          type: string
          description: ID for tracking permit
          example: H7kidnhd948594
        authStatus:
          type: string
          description: Status of authentication for the permit
          example: Pending
        needed:
          type: string
          description: Whether permit is needed, or still uner investigation
          example: Under Investigation
        status:
          type: string
          description: Status of the permit
          example: New
        submittedDate:
          type: string
          description: Date the permit was submitted
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        adjudicationDate:
          type: string
          description: Date of the permit's adjudication
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        statusLastVerified:
          type: string
          description: Date of the last verified status of permit
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Date time for when permit was updated
          example: '2024-08-14T07:00:00.000Z'
        updatedBy:
          type: string
          description: UUID for user that updated permit
          format: uuid
          example: 68a9a188-4d67-46e3-92a4-b5717435cda8
        permitNotes:
          type: array
          description: A list of notes associated with the permit (if `includeNotes` is true)
          items:
            $ref: '#/components/schemas/DB-PermitNote'
    DB-PermitNote:
      title: DB Permit Note
      type: object
      required:
        - permitNoteId
        - permitId
        - note
        - isDeleted
        - createdAt
        - createdBy
      properties:
        permitNoteId:
          type: string
          description: UUID of the permit note
          format: uuid
          example: e76469a3-896c-4435-aa83-b8b87db6f701
        permitId:
          type: string
          description: UUID of the permit associated with the note
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        note:
          type: string
          description: The text content of the note
          example: "This is a note about the permit."
        isDeleted:
          type: boolean
          description: Flag indicating if the note is soft-deleted
          example: false
        createdAt:
          type: string
          format: date-time
          description: The timestamp of when the note was created
          example: '2024-11-15T10:00:00.000Z'
        createdBy:
          type: string
          description: The ID of the user who created the note
          format: uuid
          example: b76469a3-896c-4435-aa83-b8b87db6f701
    DB-PermitType:
      title: DB Permit Type
      type: object
      required:
        - agency
        - businessDomain
        - name
        - permitTypeId
        - sourceSystemAcronym
        - trackedInATS
        - type
      properties:
        permitTypeId:
          type: number
          description: ID for the permit type
          example: 1
        acronym:
          type: string
          description: Acronym for permit type name
          example: SAP
        agency:
          type: string
          description: Government agency
          example: Water, Land and Resource Stewardship
        branch:
          type: string
          description: Government branch
          example: Archaeology
        businessDomain:
          type: string
          description: Government business domain
          example: Archaeology
        division:
          type: string
          description: Government division
          example: Forest Resiliency and Archaeology
        family:
          type: string
          description: Family associated with permit type
          example: Crown Land Tenure
        name:
          type: string
          description: Name of permit type
          example: Site Alteration Permit
        nameSubtype:
          type: string
          description: Subtype of a permit type
          example: some name subtype
        sourceSystem:
          type: string
          description: Source of the system used for this permit type
          example: Archaeology Permit Tracking System
        sourceSystemAcronym:
          type: string
          description: Acronym for source system
          example: APTS
        trackedInATS:
          type: boolean
          description: Whether this permit type is tracked in ATS or not
          example: false
        type:
          type: string
          description: Type of permit type
          example: Alteration
    DB-HousingProject:
      type: object
      required:
        - housingProjectId
        - activityId
        - submittedAt
        - submittedBy
        - addedToATS
        - ltsaCompleted
        - bcOnlineCompleted
        - naturalDisaster
        - aaiUpdated
      properties:
        housingProjectId:
          type: string
          description: UUID for the housing project
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        activityId:
          type: string
          description: Activity ID
          example: D95F1DE6
        assignedUserId:
          type: string
          description: User assigned to the housing project
          example: Smith, John
        submittedAt:
          type: string
          description: Date it was submitted
          format: date-time
          example: '2024-04-03T00:57:09.070Z'
        submittedBy:
          type: string
          description: Who made the housing project
          example: JSMITH
        locationPIDs:
          type: string
          description: Location PIDs
          example: 006-209-521, 007-209-522
        projectName:
          type: string
          description: Name of the Project
          example: New Project
        projectDescription:
          type: string
          description: A description of the project
          example: Project description example.
        companyNameRegistered:
          type: string
          description: Name of the company connected to the project
          example: QW URBAN FOOD LTD.
        singleFamilyUnits:
          type: string
          description: Range of units to be for single family
          example: 10-49
        hasRentalUnits:
          type: string
          description: Whether or not the project will have rental units
          example: 'Yes'
        streetAddress:
          type: string
          description: Street address of project
          example: 2975 Jutland Rd
        latitude:
          type: number
          description: Latitude Cordinate for project
          example: 48.440531
        longitude:
          type: number
          description: Longitude Cordinate for project
          example: -123.377677
        queuePriority:
          type: number
          description: Navigator assigned priority rank
          example: 3
        relatedPermits:
          type: string
          description: Permits related to the project
        astNotes:
          type: string
          description: Notes from AST
        astUpdated:
          type: boolean
          description: Whether updated by AST
          example: false
        addedToATS:
          type: boolean
          description: Whether added to AST
          example: false
        atsClientId:
          type: number
          description: Client number from ATS
        ltsaCompleted:
          type: boolean
          description: Ltsa completed
          example: false
        bcOnlineCompleted:
          type: boolean
          description: Completed
          example: false
        naturalDisaster:
          type: string
          description: Is it affected by Natural disaster?
          example: 'No'
        financiallySupported:
          type: boolean
          description: Is it financially supported?
          example: false
        financiallySupportedBC:
          type: string
          description: Is is financially supported by BC Housing?
          example: 'No'
        financiallySupportedIndigenous:
          type: string
          description: Is it an Indigenous led project?
          example: 'No'
        financiallySupportedNonProfit:
          type: string
          description: Is is financially supported by a Non-Profit
          example: 'No'
        financiallySupportedHousingCoop:
          type: string
          description: Is is financially supported by a House Cooperative
          example: 'No'
        aaiUpdated:
          type: boolean
          description: Updated by aai
          example: false
        intakeStatus:
          type: string
          description: Intake status type
          example: Submitted
        applicationStatus:
          type: string
          description: Status of the application
          example: New
        projectApplicantType:
          type: string
          enum: [Business, Individual]
          description: Are you applying as an individual or as a business?
          example: 'Business'
        isDevelopedInBC:
          type: string
          description: Is the project developed in BC?
          example: 'Yes'
        multiFamilyUnits:
          type: string
          description: Range of multi-family units in the project
          example: 10-49
        otherUnits:
          type: string
          description: Range of "other" units in the project
          example: 10-49
        otherUnitsDescription:
          type: string
          description: Description of the "other" units
          example: detached garages
        rentalUnits:
          type: string
          description: Range of rental units
          example: 1-9
        projectLocation:
          type: string
          description: Project's location
          example: Street address
        projectLocationDescription:
          type: string
          description: Description of the location of the project
          example: 'no'
        locality:
          type: string
          description: City, town, etc. (Location) of project
          example: Maple Ridge
        province:
          type: string
          description: Province (Location) of project
          example: BC
        hasAppliedProvincialPermits:
          type: string
          description: Has applied for provincial permits
          example: 'Yes'
        checkProvincialPermits:
          type: string
          description: Needs to check for provincial permits
          example: 'Yes'
        indigenousDescription:
          type: string
          description: Description for the Indigenous Led
        nonProfitDescription:
          type: string
          description: Description for  Non-Profit
        housingCoopDescription:
          type: string
          description: Description for COOP Housing
        consentToFeedback:
          type: boolean
          description: Whether or not user consents to feedback requests
    DB-User:
      type: object
      properties:
        userId:
          type: string
          description: UUID for the user
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb4464231
        idp:
          type: string
          description: Account/ Identity source
          example: idir
        sub:
          type: string
          description: Identity ID and source
          example: 333c6b2f38454628b638ca4ac52ea123@idir
        firstName:
          type: string
          description: First name for user
          example: John
        fullName:
          type: string
          description: Full name for user
          example: John Smith
        lastName:
          type: string
          description: Last name for user
          example: Smith
        email:
          type: string
          description: Email for for user
          example: john.smith@email.com
        active:
          type: boolean
          description: Active status of user
          example: true
    EmailData:
      type: object
      required:
        - bodyType
        - body
        - from
        - subject
        - to
      properties:
        bcc:
          type: array
          items:
            type: string
            format: email
          description: Array of BCC email addresses
        bodyType:
          type: string
          description: Type of the email body
        body:
          type: string
          description: Content of the email body
        cc:
          type: array
          items:
            type: string
            format: email
          description: Array of CC email addresses
        delayTS:
          type: number
          description: Timestamp for delayed sending
        from:
          type: string
          format: email
          description: Sender's email address
        priority:
          type: string
          description: Priority of the email
        subject:
          type: string
          description: Subject of the email
        tag:
          type: string
          description: Tag associated with the email
        to:
          type: array
          items:
            type: string
            format: email
          description: Array of recipient email addresses
    Enquiry-Basic:
      type: object
      properties:
        enquiryType:
          type: string
          description: The type of enquiry
          example: General enquiry
        relatedActivityId:
          type: string
          description: Activity id of related project
          example: 699BFA81
        enquiryDescription:
          type: string
          description: User description for enquiry
          example: This is a description for some enquiry
    Request-CreateEnquiry:
      type: object
      required:
        - contacts
        - basic
      properties:
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/DB-Contact'
        basic:
          $ref: '#/components/schemas/Enquiry-Basic'
    Request-Document:
      type: object
      properties:
        activityId:
          type: string
          description: The ID of the activity associated with the document
          example: 2DE67F13
        documentId:
          type: string
          description: The unique identifier of the document
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        filename:
          type: string
          description: The original filename of the document
          example: example.jpeg
        mimeType:
          type: string
          description: The MIME type of the document
          example: image/jpeg
        length:
          type: number
          description: The size of the document in bytes
          example: 7414
    Request-Notes:
      title: Request Notes
      type: object
      required:
        - note
        - activityId
        - noteType
        - title
        - bringForwardDate
        - bringForwardState
        - createdAt
      properties:
        note:
          type: string
          description: The note text
          example: this is a note about something in the project
        activityId:
          type: string
          description: The ID of the activity the note is associated with
          example: 2DE67F13
        noteType:
          type: string
          description: Type of note
          example: Bring forward
        title:
          type: string
          description: Title of the note
          example: Some Title
        bringForwardDate:
          type: string
          format: date-time
          description: date time for when note is to be brought forward
          example: '2029-08-14T07:00:00.000Z'
        bringForwardState:
          type: string
          description: state of a bring forward tyoe note
          example: Unresolved
        createdAt:
          type: string
          format: date-time
          description: date time for when note is to be brought forward
          example: '2024-08-14T07:00:00.000Z'
    Request-Permit:
      title: Request Permit
      type: object
      required:
        - activityId
        - needed
        - permitType
        - permitTypeId
        - status
      properties:
        activityId:
          type: string
          description: The ID of the activity associated with the permit
          example: 2DE67F13
        needed:
          type: string
          description: Whether permit is needed, or still uner investigation
          example: Under Investigation
        permitType:
          $ref: '#/components/schemas/DB-PermitType'
        permitTypeId:
          type: number
          description: ID for the associated permit type
          example: 1
        status:
          type: string
          description: Status of the permit
          example: New
        adjudicationDate:
          type: string
          description: Date of the permit's adjudication
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        authStatus:
          type: string
          description: Status of authentication for the permit
          example: Pending
        issuedPermitId:
          type: string
          description: ID of the issued permit
          example: '123'
        statusLastVerified:
          type: string
          description: Date of the last verified status of permit
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        submittedDate:
          type: string
          description: Date the permit was submitted
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        trackingId:
          type: string
          description: ID for tracking permit
          example: H7kidnhd948594
    Request-PermitNote:
      title: Request Permit Note
      type: object
      required:
        - permitId
        - note
      properties:
        permitId:
          type: string
          description: UUID of the permit associated with the note
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        note:
          type: string
          description: The text content of the note
          example: "This is a note about the permit."
    Request-Roadmap:
      title: Request Roadmap
      type: object
      required:
        - activityId
        - selectedFileIds
        - emailData
      properties:
        activityId:
          type: string
          description: ID of the activity
          example: null
        selectedFileIds:
          type: array
          items:
            type: string
            format: uuid
          description: Array of selected file IDs
        emailData:
          $ref: '#/components/schemas/EmailData'
    Request-SaveSubmissionDraft:
      title: Save draft of Submission
      type: object
      required:
        - contacts
        - basic
        - housing
        - location
        - permits
      properties:
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/DB-Contact'
        basic:
          type: object
          properties:
            projectApplicantType:
              type: string
              enum: [Business, Individual]
              description: Are you applying as an individual or as a business?
              example: 'Business'
            isDevelopedInBC:
              type: boolean
              description: >-
                Indicates if the project is being developed in British Columbia
                (BC)
              example: true
            companyNameRegistered:
              type: string
              description: Name of the company associated with the project
              example: QW URBAN FOOD LTD.
        housing:
          type: object
          properties:
            projectName:
              type: string
              description: Name of the Project
              example: New Project
            projectDescription:
              type: string
              description: A description of the project
              example: Project description example.
            singleFamilyUnits:
              type: string
              description: Range of single-family units in the project
              example: 10-49
            multiFamilyUnits:
              type: string
              description: Range of multi-family units in the project
              example: 10-49
            otherUnitsDescription:
              type: string
              description: Description of the "other" units
              example: detached garages
              maxLength: 255
            otherUnits:
              type: string
              description: Range of "other" units in the project
              example: 10-49
            hasRentalUnits:
              type: string
              description: Whether or not the project will have rental units
              example: 'Yes'
            financiallySupportedBC:
              type: string
              description: Is it financially supported by BC Housing?
              example: 'No'
            financiallySupportedIndigenous:
              type: string
              description: Is it an Indigenous-led project?
              example: 'No'
            financiallySupportedNonProfit:
              type: string
              description: Is it financially supported by a Non-Profit?
              example: 'No'
            financiallySupportedHousingCoop:
              type: string
              description: Is it financially supported by a Housing Cooperative?
              example: 'No'
            rentalUnits:
              type: string
              description: Range of rental units
              example: 1-9
            indigenousDescription:
              type: string
              description: Description for the Indigenous-led project
              example: Indigenous project details
              maxLength: 255
            nonProfitDescription:
              type: string
              description: Description for Non-Profit supported project
              example: Non-Profit project details
              maxLength: 255
            housingCoopDescription:
              type: string
              description: Description for Housing Cooperative supported project
              example: Housing Cooperative project details
              maxLength: 255
        location:
          type: object
          properties:
            naturalDisaster:
              type: string
              description: Indicates if the project is affected by a natural disaster
              example: 'No'
            projectLocation:
              type: string
              description: Location of the project
              example: Street address
            projectLocationDescription:
              type: string
              description: Description of the projects location
              example: Near the downtown area
            locationPIDs:
              type: string
              description: Location PIDs for the project
              example: 006-209-521, 007-209-522
            latitude:
              type: number
              description: Latitude coordinate for the project
              example: 48.440531
            longitude:
              type: number
              description: Longitude coordinate for the project
              example: -123.377677
            streetAddress:
              type: string
              description: Street address of the project
              example: 2975 Jutland Rd
            locality:
              type: string
              description: City, town, etc. (location) of the project
              example: Maple Ridge
            province:
              type: string
              description: Province (location) of the project
              example: BC
        permits:
          type: object
          properties:
            hasAppliedProvincialPermits:
              type: boolean
              description: Indicates whether the project has applied for provincial permits
              example: true
            checkProvincialPermits:
              type: boolean
              description: >-
                Indicates whether the project needs to check for provincial
                permits
              example: true
        appliedPermits:
          type: array
          items:
            $ref: '#/components/schemas/DB-Permit'
        investigatePermits:
          type: array
          items:
            $ref: '#/components/schemas/DB-Permit'
        housingProjectId:
          type: string
          description: UUID for the housing project
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        activityId:
          type: string
          description: Activity ID
          example: D95F1DE6
        submittedAt:
          type: string
          format: date-time
          description: Date it was submitted
          example: '2024-04-03T00:57:09.070Z'
        submittedBy:
          type: string
          description: Who made the housing project
          example: JSMITH
        intakeStatus:
          type: string
          description: Intake status type
          example: Submitted
        applicationStatus:
          type: string
          description: Status of the application
          example: New
        submissionType:
          type: string
          description: The type of submission
          example: Guidance
    Request-SubmissionSearch:
      title: Request Submission Search
      type: object
      required:
        - activityId
        - intakeStatus
        - includeUser
        - housingProjectId
        - submissionType
      properties:
        activityId:
          type: string
          description: ID of the activity
          example: 2DE67F13
        intakeStatus:
          type: string
          description: Intake status type
          example: Assigned
        includeUser:
          type: string
          description: If set it retrieves only this user's housing projects
          example: Smith, John
        housingProjectId:
          type: string
          description: UUID of housing project
          format: Uuid
          example: ac246e31-c807-496c-bc93-cd8bc2f1b2b4
        submissionType:
          type: string
          description: Type of the submission
          example: Guidance
    Request-SubmissionUpdate:
      title: Request to Update Submission
      type: object
      required:
        - housingProjectId
        - activityId
        - queuePriority
        - submissionType
        - submittedAt
        - projectName
        - hasRentalUnits
        - financiallySupportedBC
        - financiallySupportedIndigenous
        - financiallySupportedNonProfit
        - financiallySupportedHousingCoop
        - naturalDisaster
        - addedToATS
        - ltsaCompleted
        - bcOnlineCompleted
        - aaiUpdated
      properties:
        housingProjectId:
          type: string
          description: UUID for the housing project
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        activityId:
          type: string
          description: Activity ID
          example: D95F1DE6
        queuePriority:
          type: number
          description: Navigator assigned priority rank
          format: integer
          example: 2
          default: 3
        submissionType:
          type: string
          description: The type of submission
          example: Guidance
        submittedAt:
          type: string
          description: Date it was submitted
          format: date-time
          example: '2024-04-03T00:57:09.070Z'
        relatedEnquiries:
          type: string
          description: Related enquiries
          example: Some enquiry
        companyNameRegistered:
          type: string
          description: Name of the company connected to the project
          example: QW URBAN FOOD LTD.
        isDevelopedInBC:
          type: string
          description: Is the project developed in BC?
          example: 'Yes'
        projectName:
          type: string
          description: Name of the Project
          example: New Project
        projectDescription:
          type: string
          description: Description of the project
          example: Project description example.
          nullable: true
        singleFamilyUnits:
          type: string
          description: Range of single-family units in the project
          example: 10-49
        multiFamilyUnits:
          type: string
          description: Range of multi-family units in the project
          example: 10-49
        otherUnitsDescription:
          type: string
          description: Description of the "other" units
          example: detached garages
          maxLength: 255
        otherUnits:
          type: string
          description: Range of "other" units in the project
          example: 10-49
        hasRentalUnits:
          type: string
          description: Whether or not the project will have rental units
          example: 'Yes'
        rentalUnits:
          type: string
          description: Range of rental units
          example: 1-9
          nullable: true
        financiallySupportedBC:
          type: string
          description: Is it financially supported by BC Housing?
          example: 'No'
        financiallySupportedIndigenous:
          type: string
          description: Is it an Indigenous-led project?
          example: 'No'
        indigenousDescription:
          type: string
          description: Description for the Indigenous-led project
          example: Indigenous project details
          maxLength: 255
        financiallySupportedNonProfit:
          type: string
          description: Is it financially supported by a Non-Profit?
          example: 'No'
        nonProfitDescription:
          type: string
          description: Description for Non-Profit supported project
          example: Non-Profit project details
          maxLength: 255
        financiallySupportedHousingCoop:
          type: string
          description: Is it financially supported by a Housing Cooperative?
          example: 'No'
        housingCoopDescription:
          type: string
          description: Description for Housing Cooperative supported project
          example: Housing Cooperative project details
          maxLength: 255
        streetAddress:
          type: string
          description: Street address of project
          example: 2975 Jutland Rd
          maxLength: 255
        locality:
          type: string
          description: City, town, etc. (Location) of project
          example: Victoria
          maxLength: 255
        province:
          type: string
          description: Province (Location) of project
          example: BC
          maxLength: 255
        locationPIDs:
          type: string
          description: Location PIDs
          example: 006-209-521, 007-209-522
          maxLength: 255
        latitude:
          type: number
          description: Latitude coordinate for the project
          example: 48.440531
        longitude:
          type: number
          description: Longitude coordinate for the project
          example: -123.377677
        geomarkUrl:
          type: string
          description: URL for geomark
          example: http://geomark.com
          maxLength: 255
        naturalDisaster:
          type: string
          description: Is it affected by a natural disaster?
          example: 'No'
        projectLocationDescription:
          type: string
          description: Description of the location of the project
          example: Near the river
          maxLength: 4000
        addedToATS:
          type: boolean
          description: Whether added to ATS
          example: false
        atsClientId:
          type: number
          description: Client number from ATS
          example: ATS-001
          maxLength: 255
        ltsaCompleted:
          type: boolean
          description: Ltsa completed
          example: false
        bcOnlineCompleted:
          type: boolean
          description: BC Online completed
          example: false
        aaiUpdated:
          type: boolean
          description: Updated by AAI
          example: false
        astNotes:
          type: string
          description: Notes from AST
          example: AST notes here
          maxLength: 4000
        intakeStatus:
          type: string
          description: Intake status type
          example: Submitted
        assignedUserId:
          type: string
          description: User ID assigned to the housing project
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
        applicationStatus:
          type: string
          description: Status of the application
          example: New
        waitingOn:
          type: string
          description: Any dependencies or things waiting on
          example: Waiting on review
          maxLength: 255
    Response-BadRequest:
      title: Response Bad Request
      type: object
      allOf:
        - $ref: '#/components/schemas/Response-Problem'
        - type: object
          properties:
            status:
              example: 400
            title:
              example: Bad Request
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
    Response-BringForwardNotes:
      type: object
      required:
        - activityId
        - noteId
        - title
        - projectName
        - createdByFullName
        - bringForwardDate
      properties:
        activityId:
          type: string
          description: The ID of the activity the note is associated with
          example: 2DE67F13
        noteId:
          type: string
          description: UUID of a note
          format: uuid
          example: 17e5c858-66c1-49ba-bb2e-2b286525f532
        housingProjectId:
          type: string
          description: UUID of a housing project
          format: uuid
          example: 17e5c858-66c1-49ba-bb2e-2b2865635421
        enquiryId:
          type: string
          description: UUID for an enquiry
          format: uuid
          example: b76469a3-896c-4435-aa83-b8b87db6f701
        title:
          type: string
          description: Title of the note
          example: Some Title
        createdByFullName:
          type: string
          description: The full name of the user who created the note
          example: Smith, John
        bringForwardDate:
          type: string
          format: date-time
          description: Date time for when note is to be brought forward
          example: '2029-08-14T07:00:00.000Z'
        projectName:
          type: string
          description: Name of the project the note is attached to
          example: The Project
    Response-DeletedEnquiry:
      type: object
      allOf:
        - type: object
          required:
            - is_deleted
          properties:
            is_deleted:
              type: boolean
              example: true
        - $ref: '#/components/schemas/DB-Enquiry'
    Response-CreateEnquiry:
      type: object
      required:
        - activityId
        - enquiryId
      properties:
        activityId:
          type: string
        enquiryId:
          type: string
    Response-DraftSubmission:
      title: Response Draft Submission
      type: object
      required:
        - activityId
        - housingProjectId
      properties:
        housingProjectId:
          type: string
          description: UUID for the housing project
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
        activityId:
          type: string
          description: Activity Id
          example: D95F1DE6
    Response-Email:
      type: object
      properties:
        messages:
          type: array
          items:
            type: object
            properties:
              msgId:
                type: string
                description: UUID for email message
                format: uuid
                example: b76469a3-896c-4435-aa83-b8b87db6f701
              to:
                type: array
                items:
                  type: string
                  description: The To email addresses
        txId:
          type: string
          format: uuid
          example: b76469a3-896c-4435-aa83-b8b87db6f701
    Response-Error:
      title: Response Error
      type: object
      allOf:
        - $ref: '#/components/schemas/Response-Problem'
        - type: object
          properties:
            status:
              example: 500
            title:
              example: Internal Server Error
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500
    Response-Forbidden:
      title: Response Forbidden
      type: object
      allOf:
        - $ref: '#/components/schemas/Response-Problem'
        - type: object
          properties:
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
            title:
              example: Forbidden
            status:
              example: 403
            detail:
              example: User lacks permission to complete this action
    Response-NotFound:
      title: Response Not Found
      type: object
      allOf:
        - $ref: '#/components/schemas/Response-Problem'
        - type: object
          properties:
            status:
              example: 404
            title:
              example: Not Found
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    Response-Problem:
      title: Response Problem
      type: object
      required:
        - type
        - title
        - status
      properties:
        type:
          type: string
          description: What type of problem, link to explanation of problem
        title:
          type: string
          description: Title of problem, generally the HTTP Status Code description
        status:
          type: string
          description: The HTTP Status code
        detail:
          type: string
          description: >-
            A short, human-readable explanation specific to this occurrence of
            the problem
        instance:
          type: string
          description: >-
            A URI reference that identifies the specific occurrence of the
            problem
    Response-SearchUsers:
      title: Response for searching users
      type: array
      items:
        allOf:
          - $ref: '#/components/schemas/DB-User'
          - type: object
            properties:
              groups:
                type: array
                description: List of groups (associated roles) for a user
                items:
                  type: string
                example:
                  - NAVIGATOR
    Response-SubmissionCreate:
      title: Response for Create Submission
      type: object
      required:
        - activityId
        - housingProjectId
      properties:
        activityId:
          type: string
          description: Activity ID
          example: D95F1DE6
        housingProjectId:
          type: string
          description: UUID for the housing project
          format: uuid
          example: d95f1de6-698b-4d9d-b938-487eb446ace8
    Response-SubmissionPermitData:
      type: object
      properties:
        projectName:
          type: string
          description: Name of the Project
          example: New Project
        consentToFeedback:
          type: boolean
          description: Whether or not user consents to feedback requests
        firstName:
          type: string
          description: First name of the contact person related to housing project
          example: John
        lastName:
          type: string
          description: Last name of the contact person related to housing project
          example: Smith
        phoneNumber:
          type: string
          description: Phone number for contact related to housing project
          example: (123) 456-7890
        email:
          type: string
          format: email
          description: Email address for contact related to housing project
          example: john.smith@example.com
        contactPreference:
          type: string
          enum: [Phone call, Email, Either]
          description: Preferred method of contact related to housing project
          example: Email
        activityId:
          type: string
          description: Activity ID related to housing project and permit
          example: D95F1DE6
        locality:
          type: string
          description: City, town, etc. (Location) of project
          example: Maple Ridge
        streetAddress:
          type: string
          description: Street address of project
          example: 2975 Jutland Rd
        latitude:
          type: number
          description: Latitude Cordinate for project
          example: 48.440531
        longitude:
          type: number
          description: Longitude Cordinate for project
          example: -123.377677
        locationPIDs:
          type: string
          description: Location PIDs for the project
          example: 006-209-521, 007-209-522
        issuedPermitId:
          type: string
          description: ID of the issued permit
          example: '123'
        trackingId:
          type: string
          description: ID for tracking permit
          example: H7kidnhd948594
        authStatus:
          type: string
          description: Status of authentication for the permit
          example: Pending
        needed:
          type: string
          description: Whether permit is needed, or still uner investigation
          example: Under Investigation
        status:
          type: string
          description: Status of the permit
          example: New
        submittedDate:
          type: string
          description: Date the permit was submitted
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        adjudicationDate:
          type: string
          description: Date of the permit's adjudication
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        statusLastVerified:
          type: string
          description: Date of the last verified status of permit
          format: date-time
          example: '2024-08-14T07:00:00.000Z'
        acronym:
          type: string
          description: Acronym for permit type name
          example: SAP
        agency:
          type: string
          description: Government agency
          example: Water, Land and Resource Stewardship
        branch:
          type: string
          description: Government branch
          example: Archaeology
        division:
          type: string
          description: Government division
          example: Forest Resiliency and Archaeology
        name:
          type: string
          description: Name of permit type
          example: Site Alteration Permit
        sourceSystem:
          type: string
          description: Source of the system used for this permit type
          example: Archaeology Permit Tracking System
        sourceSystemAcronym:
          type: string
          description: Acronym for source system
          example: APTS
        trackedInATS:
          type: boolean
          description: Whether this permit type is tracked in ATS or not
          example: false
        type:
          type: string
          description: Type of permit type
          example: Alteration
    Response-SubmissionStatistics:
      type: object
      properties:
        total_submissions:
          type: number
          example: 112
        total_submissions_between:
          type: number
          example: 0
        total_submissions_monthyear:
          type: number
          example: 0
        total_submissions_assignedto:
          type: number
          example: 0
        intake_submitted:
          type: number
          example: 80
        intake_assigned:
          type: number
          example: 6
        intake_completed:
          type: number
          example: 1
        state_new:
          type: number
          example: 112
        state_inprogress:
          type: number
          example: 0
        state_delayed:
          type: number
          example: 0
        state_completed:
          type: number
          example: 0
        waiting_on:
          type: number
          example: 0
        queue_1:
          type: number
          example: 7
        queue_2:
          type: number
          example: 4
        queue_3:
          type: number
          example: 50
        escalation:
          type: number
          example: 0
        general_enquiry:
          type: number
          example: 0
        guidance:
          type: number
          example: 50
        inapplicable:
          type: number
          example: 0
        status_request:
          type: number
          example: 0
    Response-Unauthorized:
      title: Response Unauthorized
      type: object
      allOf:
        - $ref: '#/components/schemas/Response-Problem'
        - type: object
          properties:
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
            title:
              example: Unauthorized
            status:
              example: 401
            detail:
              example: Invalid authorization credentials
    Response-ValidationError:
      title: Response Validation Error
      type: object
      allOf:
        - $ref: "#/components/schemas/Response-Problem"
        - type: object
          required:
            - errors
          properties:
            errors:
              type: array
              items:
                type: object
                required:
                  - message
                properties:
                  value:
                    type: object
                    description: Contents of the field that was in error.
                    example: {}
                  message:
                    type: string
                    description: The error message for the field.
                    example: Invalid value `encoding`.
            status:
              example: 422
            title:
              example: Unprocessable Entity
            type:
              example: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422
  responses:
    BadRequest:
      description: Bad Request (Request is missing content or malformed)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Response-BadRequest'
    Error:
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Response-Error'
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Response-Forbidden'
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Response-NotFound'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Response-Unauthorized'
    UnprocessableEntity:
      description: Unprocessable Content (Generally validation error(s))
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Response-ValidationError"
  securitySchemes:
    BearerAuth:
      type: http
      description: Bearer token auth using an OIDC issued JWT token
      scheme: bearer
      bearerFormat: JWT
    OpenID:
      type: openIdConnect
      description: OpenID Connect endpoint for acquiring JWT tokens
      openIdConnectUrl: >-
        https://logonproxy.gov.bc.ca/auth/realms/your-realm-name/.well-known/openid-configuration
